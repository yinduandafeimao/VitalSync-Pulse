# 血条监控工具

## 项目概述

血条监控工具是一款专为游戏玩家设计的辅助软件，能够实时监控队友血量状态，并提供自动选择低血量队友的功能。本工具使用计算机视觉技术识别游戏界面中的队友信息和血条状态，帮助玩家更高效地进行团队协作。

## 主要功能

### 队友识别

- **职业图标识别**：自动识别队友的职业类型
- **队友名称识别**：通过OCR技术识别队友名称
- **批量识别**：一次性识别多个队友信息
- **图像质量优化**：提供对比度、亮度和采样次数调整，提高识别准确率

### 血条监控

- **实时监控**：实时监控所有队员的血量状态
- **自定义血条位置**：可为每个队员单独设置血条位置
- **自定义血条颜色**：可为每个队员单独设置血条颜色范围
- **自动选择低血量队友**：当队友血量低于设定阈值时，自动选择该队友
- **职业优先级设置**：可设置优先选择的职业类型

## 安装要求

### 系统要求

- Windows 操作系统
- Python 3.6 或更高版本

### 依赖库

```
python -m pip install -r requirements.txt
```

主要依赖：
- PySide6：用于图形界面
- OpenCV (cv2)：用于图像处理
- NumPy：用于数学计算
- PaddleOCR：用于文字识别
- keyboard：用于键盘监听
- pyautogui：用于屏幕截图和鼠标控制
- pywin32：用于Windows系统交互

## 使用方法

### 启动程序

```
python main_ui.py
```

### 队友识别配置

1. **添加职业图标**
   - 点击「添加职业图标」按钮
   - 可以从文件选择或从屏幕截取职业图标
   - 图标将保存在`profession_icons`目录下

2. **设置图像质量参数**
   - 调整对比度：影响识别精度
   - 调整亮度：影响识别精度
   - 设置采样次数：增加采样次数可提高准确率，但会降低速度

3. **识别队友**
   - 点击「选择识别区域」按钮，框选游戏中队友信息区域
   - 点击「开始识别」按钮，系统将自动识别队友信息
   - 识别结果将显示在下方结果区域

### 血条监控设置

1. **队员管理**
   - 添加队员：点击「添加队员」按钮，输入队员名称和职业
   - 移除队员：点击「移除队员」按钮，选择要移除的队员

2. **血条设置**
   - 设置血条位置：点击「设置血条位置」按钮，选择队员后框选其血条位置
   - 设置血条颜色：点击「设置血条颜色」按钮，选择队员后将鼠标移至血条上按空格键获取颜色

3. **快捷键设置**
   - 开始监控快捷键：默认为F9，可自定义
   - 停止监控快捷键：默认为F10，可自定义
   - 点击「记录」按钮后按下想要设置的快捷键，然后点击「保存快捷键设置」

4. **自动选择设置**
   - 启用/禁用自动选择：勾选「启用自动选择低血量队友」复选框
   - 血量阈值：设置触发自动选择的血量百分比阈值
   - 冷却时间：设置两次自动选择之间的最小间隔时间
   - 优先职业：设置自动选择时优先考虑的职业类型

### 开始监控

1. 完成上述设置后，点击「开始监控」按钮或按下设定的开始监控快捷键
2. 监控结果将实时显示在监控结果区域
3. 点击「停止监控」按钮或按下设定的停止监控快捷键可停止监控

## 配置文件说明

- **队员配置文件**：`[队员名称]_config.json`，存储队员的职业、血条位置和颜色信息
- **快捷键配置文件**：`hotkeys_config.json`，存储监控快捷键设置
- **自动选择配置文件**：`auto_select_config.json`，存储自动选择相关设置

## 注意事项

1. 首次使用时，需要先添加职业图标和设置血条位置/颜色
2. 游戏界面分辨率变化可能导致已保存的位置设置失效，需重新设置
3. 不同职业的血条颜色可能有差异，建议为每个队员单独设置
4. 使用自动选择功能时，确保游戏窗口处于活动状态

## 常见问题

1. **识别不准确**：尝试调整图像质量参数或重新设置职业图标
2. **血条监控不准确**：重新设置血条位置和颜色
3. **快捷键无效**：检查是否与其他程序快捷键冲突
4. **程序崩溃**：检查是否安装了所有依赖库

## 开发者信息

本工具使用Python开发，主要利用PySide6构建界面，OpenCV进行图像处理，PaddleOCR进行文字识别。如有问题或建议，请联系开发者。
